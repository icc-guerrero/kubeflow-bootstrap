# Namespaces to be created
namespaces:
  project: unicc-aihub
  certManager: cert-manager
  istioSystem: istio-system
  knative: knative-serving
  kubeflow: kubeflow
  oauth2proxy: oauth2-proxy
  auth: auth

# Official kubeflow manifests repo and tag to use
kubeflow:
  manifestsRepo: https://github.com/kubeflow/manifests
  refTag: v1.10.1

# Enable or disable components
enable:
  certManager: true
  istio: true
  knative: true
  kserve: true
  dex: true
  centralDashboard: true
  pipelines: true
  notebooks: true
  profiles: true
  trainingOperator: true

oauth2Proxy:
  enabled: true
  # m2m-dex-only | m2m-dex-and-kind | m2m-dex-and-eks
  overlay: m2m-dex-only
  cookieDomains:
    - "example.com"
  whitelistDomains:
    - "example.com"
  # Custom sign-in page branding
  providerDisplayName: "Dex"
  # Custom SVG logo for the sign-in page (inline SVG content)
  # If not set, the default Kubeflow logo is used
  customSignInLogo: ""
dex:
  # Dex issuer URL - this is the public URL where Dex is accessible
  issuerUrl: "https://<public-url>:5556/dex"
  # Optional: Custom JWKS URI for JWT validation (if not set, defaults to issuer's JWKS endpoint)
  # jwksUri: "https://custom-jwks-endpoint/keys"
  logLevel: "debug"  # debug, info, warn, error
  skipApprovalScreen: true
  enablePasswordDB: true
  # Enable copying secret from project namespace to auth namespace
  # The secret name will be the same as the project namespace name
  copySecretsFromProject: false
  staticPasswords:
    - email: "user@example.com"
      hashFromEnv: "DEX_USER_PASSWORD"
      username: "user"
      userID: "15841185641784"
  # Microsoft Azure AD B2C Connector Configuration (using OIDC)
  connectors:
    - type: oidc
      id: <connector-id>
      name: "<Connector Display Name>"
      config:
        # Use the OIDC Discovery endpoint you have (paste the full URL here)
        # Example: https://<tenant-name>.b2clogin.com/<tenant-id>/<custom-policy>/v2.0/
        issuer: "https://<tenant-name>.b2clogin.com/<tenant-id>/<custom-policy>/v2.0/"
        # Alternative issuer URL for Azure B2C (tenant ID based)
        issuerAlias: "https://<tenant-name>.b2clogin.com/<tenant-id>/v2.0/"
        # Redirect URI - must match what's configured in Azure AD B2C
        redirectURI: "https://<public-url>/dex/callback"
        # Paste your Client ID
        clientID: "<client-id>"
        # Paste your Secret Value (not the Secret ID)
        clientSecret: "<client-secret>"
        # Skip email verification
        insecureSkipEmailVerified: true
        # Scopes to request (openid is required, add profile, email, etc.)
        scopes:
          - openid
          - profile
          - email
# Timings
kustomizations:
  intervals:
    default: 5m
  timeouts:
    short: 5m
    medium: 10m
    long: 15m
